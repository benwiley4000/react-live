!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("prismjs/components/prism-core"),require("prismjs/components/prism-clike"),require("prismjs/components/prism-javascript"),require("prismjs/components/prism-markup"),require("prismjs/components/prism-jsx"),require("prismjs/plugins/line-numbers/prism-line-numbers"),require("prismjs/plugins/line-highlight/prism-line-highlight"),require("unescape"),require("dom-iterator"),require("react"),require("buble"),require("core-js/fn/object/assign"),require("prop-types")):"function"==typeof define&&define.amd?define(["exports","prismjs/components/prism-core","prismjs/components/prism-clike","prismjs/components/prism-javascript","prismjs/components/prism-markup","prismjs/components/prism-jsx","prismjs/plugins/line-numbers/prism-line-numbers","prismjs/plugins/line-highlight/prism-line-highlight","unescape","dom-iterator","react","buble","core-js/fn/object/assign","prop-types"],n):n(e.ReactLive={},e.prismCore,null,null,null,null,null,null,e.unescape,e.iterator,e.React,e.Buble,e.assign,e.PropTypes)}(this,function(e,n,t,o,r,i,s,a,c,l,p,u,d,f){"use strict";function m(e,n){var t=window.getSelection();if(1==arguments.length){if(!t.rangeCount)return;var o={},r=(p=t.getRangeAt(0)).cloneRange();return r.selectNodeContents(e),r.setEnd(p.endContainer,p.endOffset),o.end=r.toString().length,r.setStart(p.startContainer,p.startOffset),o.start=o.end-r.toString().length,o.atStart=0===r.startOffset,o.commonAncestorContainer=r.commonAncestorContainer,o.endContainer=r.endContainer,o.startContainer=r.startContainer,o}for(var i,s,a=n.end&&n.end!==n.start,c=0,p=document.createRange(),u=l(e).select(Node.TEXT_NODE).revisit(!1),d=n.start>e.textContent.length?e.textContent.length:n.start,f=n.end>e.textContent.length?e.textContent.length:n.end,m=n.atStart;i=u.next();){var g=c;c+=i.textContent.length;var y=m?c>d:c>=d;if(!s&&y&&(s=!0,p.setStart(i,d-g),!a)){p.collapse(!0),h(e,p);break}if(a&&c>=f){p.setEnd(i,f-g),h(e,p);break}}}function h(e,n){var t=window.getSelection();e.focus(),t.removeAllRanges(),t.addRange(n)}c=c&&c.hasOwnProperty("default")?c.default:c,l=l&&l.hasOwnProperty("default")?l.default:l;var g="default"in p?p.default:p;d=d&&d.hasOwnProperty("default")?d.default:d,f=f&&f.hasOwnProperty("default")?f.default:f;var y=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter(Boolean).join(" ")},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"jsx";return n.highlight(e,n.languages[t])},C=function(e){return e.replace(/^((\t|  )+)/gm,function(e,n){return n.replace(/\t/g,"  ")})},k=function(e){return e.replace("\n","<br>")},b=function(e){return c(e.replace(/<br>/gm,"\n").replace(/<\/?[^>]*>/gm,""))},S=function(e,n){var t=e.slice(0,n),o=t.lastIndexOf("\n")+1;return t.slice(o)},w=function(e,n){var t=S(e,n).match(/^\s+/);return null===t?"":t[0]||""},E=/^(\t|  )*  $/,j=function(e,n){var t=S(e,n);return E.test(t)?2:0},x=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},T=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},O=function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)},P=function(e,n){var t={};for(var o in e)n.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},R=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n},K=function(e){function n(){var t,o,r;x(this,n);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return t=o=R(this,e.call.apply(e,[this].concat(s))),o.undoStack=[],o.undoOffset=0,o.undoTimestamp=0,o.compositing=!1,o.state={html:""},o.onRef=function(e){o.ref=e},o.getPlain=function(){if(o._innerHTML===o.ref.innerHTML)return o._plain;var e=b(k(o.ref.innerHTML));return o._plain=e,o._innerHTML=o.ref.innerHTML,o._plain},o.recordChange=function(e,n){if(e!==o.undoStack[o.undoStack.length-1]){o.undoOffset>0&&(o.undoStack=o.undoStack.slice(0,-o.undoOffset),o.undoOffset=0);var t=Date.now(),r={plain:e,selection:n};t-o.undoTimestamp<3e3?o.undoStack[o.undoStack.length-1]=r:(o.undoStack.push(r),o.undoStack.length>50&&o.undoStack.shift()),o.undoTimestamp=t}},o.updateContent=function(e){o.compositing||(o.setState({html:v(e,o.props.language)}),o.props.onChange&&o.props.onChange(e))},o.restoreStackState=function(e){var n=o.undoStack[o.undoStack.length-1-e],t=n.plain,r=n.selection;o.selection=r,o.undoOffset=e,o.updateContent(t)},o.undo=function(){var e=o.undoOffset+1;e>=o.undoStack.length||o.restoreStackState(e)},o.redo=function(){var e=o.undoOffset-1;e<0||o.restoreStackState(e)},o.onKeyDown=function(e){if(o.props.onKeyDown&&o.props.onKeyDown(e),9!==e.keyCode||o.props.ignoreTabKey)if(8===e.keyCode){var n=m(o.ref),t=n.start;if(t!==n.end)return;var r=j(o.getPlain(),t);if(r<=0)return;for(var i=0;i<r;i++)document.execCommand("delete",!1);e.preventDefault()}else if(13===e.keyCode){var s=m(o.ref).start,a=w(o.getPlain(),s);document.execCommand("insertHTML",!1,"\n"+a),e.preventDefault()}else 90!==e.keyCode||e.metaKey===e.ctrlKey||e.altKey||(e.shiftKey?o.redo():o.undo(),e.preventDefault());else document.execCommand("insertHTML",!1,"  "),e.preventDefault()},o.onKeyUp=function(e){if(o.props.onKeyUp&&o.props.onKeyUp(e),91!==e.keyCode&&93!==e.keyCode&&!e.ctrlKey&&!e.metaKey)if(13===e.keyCode&&(o.undoTimestamp=0),o.selection=m(o.ref),37!==e.keyCode&&38!==e.keyCode&&39!==e.keyCode&&40!==e.keyCode){var n=o.getPlain();o.recordChange(n,o.selection),o.updateContent(n)}else o.undoTimestamp=0},o.onCompositionStart=function(e){o.props.onCompositionStart&&o.props.onCompositionStart(e),o.compositing=!0},o.onCompositionEnd=function(e){o.props.onCompositionEnd&&o.props.onCompositionEnd(e),o.compositing=!1},o.onClick=function(e){o.props.onClick&&o.props.onClick(e),o.undoTimestamp=0,o.selection=m(o.ref)},r=t,R(o,r)}return O(n,e),n.prototype.componentWillMount=function(){var e=v(C(this.props.code),this.props.language);this.setState({html:e})},n.prototype.componentDidMount=function(){this.recordChange(this.getPlain()),this.undoTimestamp=0},n.prototype.componentWillReceiveProps=function(e){var n=e.code,t=e.language;if(n!==this.props.code||t!==this.props.language){var o=v(C(n),t);this.setState({html:o})}},n.prototype.componentDidUpdate=function(){var e=this.selection;e&&m(this.ref,e)},n.prototype.render=function(){var e=this.props,n=e.contentEditable,t=(e.className,e.style),o=(e.showLineNumbers,e.highlightLines),r=(e.code,e.ignoreTabKey,e.language,P(e,["contentEditable","className","style","showLineNumbers","highlightLines","code","ignoreTabKey","language"])),i=this.state.html;return g.createElement("pre",T({},r,{ref:this.onRef,className:y(),"data-line":o,style:t,spellCheck:"false",contentEditable:n,onCompositionEnd:n?this.onCompositionEnd:void 0,onCompositionStart:n?this.onCompositionStart:void 0,onKeyDown:n?this.onKeyDown:void 0,onKeyUp:n?this.onKeyUp:void 0,onClick:n?this.onClick:void 0,dangerouslySetInnerHTML:{__html:i}}))},n}(p.Component);K.defaultProps={contentEditable:!0,language:"jsx"};var L={assign:d},N={objectAssign:"_poly.assign",transforms:{dangerousForOf:!0,dangerousTaggedTemplateString:!0}},_=function(e){return u.transform(e,N).code},D=function(e,n){return function(t){function o(){return x(this,o),R(this,t.apply(this,arguments))}return O(o,t),o.prototype.componentDidCatch=function(e){n(e)},o.prototype.render=function(){return"function"==typeof e?g.createElement(e,null):e},o}(g.Component)},I=function(e,n){var t=Object.keys(n),o=t.map(function(e){return n[e]});return(new(Function.prototype.bind.apply(Function,[null].concat(["_poly","React"],t,[e])))).apply(void 0,[L,g].concat(o))},q=function(e,n){var t=e.code,o=void 0===t?"":t,r=e.scope,i=void 0===r?{}:r,s=o.trim().replace(/;$/,""),a=_("("+s+")").trim();return D(I("return "+a,i),n)},M=function(e,n,t){var o=e.code,r=void 0===o?"":o,i=e.scope,s=void 0===i?{}:i,a=function(e){n(D(e,t))};if(!/render\s*\(/.test(r))return t(new SyntaxError("No-Inline evaluations must call `render`."));I(_(r),T({},s,{render:a}))},A=g.createElement("style",{dangerouslySetInnerHTML:{__html:"\n.prism-code {\n  display: block;\n  white-space: pre;\n\n  background-color: #1D1F21;\n  color: #C5C8C6;\n\n  padding: 0.5rem;\n  margin: 0;\n\n  box-sizing: border-box;\n  vertical-align: baseline;\n  outline: none;\n  text-shadow: none;\n  -webkit-hyphens: none;\n  -ms-hyphens: none;\n  hyphens: none;\n  word-wrap: normal;\n  word-break: normal;\n  text-align: left;\n  word-spacing: normal;\n  -moz-tab-size: 2;\n  -o-tab-size: 2;\n  tab-size: 2;\n}\n\n.token.comment,\n.token.prolog,\n.token.doctype,\n.token.cdata {\n  color: hsl(30, 20%, 50%);\n}\n\n.token.punctuation {\n  opacity: .7;\n}\n\n.namespace {\n  opacity: .7;\n}\n\n.token.property,\n.token.tag,\n.token.boolean,\n.token.number,\n.token.constant,\n.token.symbol {\n  color: hsl(350, 40%, 70%);\n}\n\n.token.selector,\n.token.attr-name,\n.token.string,\n.token.char,\n.token.builtin,\n.token.inserted {\n  color: hsl(75, 70%, 60%);\n}\n\n.token.operator,\n.token.entity,\n.token.url,\n.language-css .token.string,\n.style .token.string,\n.token.variable {\n  color: hsl(40, 90%, 60%);\n}\n\n.token.atrule,\n.token.attr-value,\n.token.keyword {\n  color: hsl(350, 40%, 70%);\n}\n\n.token.regex,\n.token.important {\n  color: #e90;\n}\n\n.token.important,\n.token.bold {\n  font-weight: bold;\n}\n.token.italic {\n  font-style: italic;\n}\n\n.token.entity {\n  cursor: help;\n}\n\n.token.deleted {\n  color: red;\n}\n"}}),H=function(){return A},U={live:f.shape({code:f.string,error:f.string,onError:f.func,onChange:f.func,element:f.oneOfType([f.string,f.number,f.element,f.func])})},z=function(e){function n(){var t,o,r;x(this,n);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return t=o=R(this,e.call.apply(e,[this].concat(s))),o.onChange=function(e){var n=o.props,t=n.scope,r=n.transformCode,i=n.noInline;o.transpile({code:e,scope:t,transformCode:r,noInline:i})},o.onError=function(e){o.setState({error:e.toString(),errorRaw:e})},o.transpile=function(e){var n=e.code,t=e.scope,r=e.transformCode,i=e.noInline,s=void 0!==i&&i,a={code:r?r(n):n,scope:t},c=function(e){o.setState({element:void 0,error:e.toString(),errorRaw:e})},l=function(e){return o.setState(T({},p,{element:e}))},p={unsafeWrapperError:void 0,error:void 0,errorRaw:null};try{s?(o.setState(T({},p,{element:null})),M(a,l,c)):l(q(a,c))}catch(e){o.setState(T({},p,{error:e.toString(),errorRaw:e}))}},o.getChildContext=function(){return{live:T({},o.state,{code:o.props.code,onError:o.onError,onChange:o.onChange})}},r=t,R(o,r)}return O(n,e),n.prototype.componentWillMount=function(){var e=this.props,n=e.code,t=e.scope,o=e.transformCode,r=e.noInline;this.transpile({code:n,scope:t,transformCode:o,noInline:r})},n.prototype.componentWillReceiveProps=function(e){var n=e.code,t=e.scope,o=e.noInline,r=e.transformCode;n===this.props.code&&t===this.props.scope&&o===this.props.noInline&&r===this.props.transformCode||this.transpile({code:n,scope:t,transformCode:r,noInline:o})},n.prototype.componentDidUpdate=function(e,n){this.state.errorRaw!==n.errorRaw&&this.props.onError&&this.props.onError(this.state.errorRaw)},n.prototype.render=function(){var e=this.props,n=e.children,t=(e.className,e.code,e.mountStylesheet),o=(e.noInline,e.transformCode,e.scope,P(e,["children","className","code","mountStylesheet","noInline","transformCode","scope"]));return g.createElement("div",T({className:y()},o),t&&g.createElement(H,null),n)},n}(p.Component);z.childContextTypes=U,z.defaultProps={code:"",mountStylesheet:!0,noInline:!1};var W=function(e,n){var t=n.live;return g.createElement(K,T({},e,{code:t.code,onChange:function(n){t.onChange(n),"function"==typeof e.onChange&&e.onChange(n)}}))};W.contextTypes=U;var F=function(e,n){var t=n.live,o=(e.className,P(e,["className"]));return t.error?g.createElement("div",T({},o,{className:y()}),t.error):null};F.contextTypes=U;var B=function(e,n){var t=n.live.element,o=(e.className,P(e,["className"])),r=t;return g.createElement("div",T({},o,{className:y()}),r&&g.createElement(r,null))};B.contextTypes=U;var $=function(e){var n=function(n){function t(){return x(this,t),R(this,n.apply(this,arguments))}return O(t,n),t.prototype.render=function(){var n=this.context.live;return g.createElement(e,T({live:n},this.props))},t}(p.Component);return n.contextTypes=U,n};e.Editor=K,e.LiveProvider=z,e.LiveEditor=W,e.LiveError=F,e.LivePreview=B,e.withLive=$,e.generateElement=q,e.renderElementAsync=M,Object.defineProperty(e,"__esModule",{value:!0})});
